<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>📖TypeScript 速通教程 @尚硅谷 | 川一土的博客视界</title><meta name="author" content="yiTuChuan"><meta name="copyright" content="yiTuChuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="快速上手 TypeScript 的核心知识，详细介绍 TS 的类型系统（基础类型、type、interface）、类与继承、泛型编程、装饰器模式等内容，并通过大量示例代码展示 TS 在实际开发中的应用。">
<meta property="og:type" content="article">
<meta property="og:title" content="📖TypeScript 速通教程 @尚硅谷">
<meta property="og:url" content="https://zhengzehua.top/2024/11/30/TypeScript%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B@%E5%B0%9A%E7%A1%85%E8%B0%B7/index.html">
<meta property="og:site_name" content="川一土的博客视界">
<meta property="og:description" content="快速上手 TypeScript 的核心知识，详细介绍 TS 的类型系统（基础类型、type、interface）、类与继承、泛型编程、装饰器模式等内容，并通过大量示例代码展示 TS 在实际开发中的应用。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zhengzehua.top/images/butterfly_avatar_img.svg">
<meta property="article:published_time" content="2024-11-30T13:56:00.000Z">
<meta property="article:modified_time" content="2025-06-05T07:35:36.353Z">
<meta property="article:author" content="yiTuChuan">
<meta property="article:tag" content="前端学习,前端开发,Web开发,技术分享,学习感悟">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhengzehua.top/images/butterfly_avatar_img.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "📖TypeScript 速通教程 @尚硅谷",
  "url": "https://zhengzehua.top/2024/11/30/TypeScript%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B@%E5%B0%9A%E7%A1%85%E8%B0%B7/",
  "image": "https://zhengzehua.top/images/butterfly_avatar_img.svg",
  "datePublished": "2024-11-30T13:56:00.000Z",
  "dateModified": "2025-06-05T07:35:36.353Z",
  "author": [
    {
      "@type": "Person",
      "name": "yiTuChuan",
      "url": "https://github.com/Nasir1423"
    }
  ]
}</script><link rel="shortcut icon" href="/images/butterfly_favicon.svg"><link rel="canonical" href="https://zhengzehua.top/2024/11/30/TypeScript%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B@%E5%B0%9A%E7%A1%85%E8%B0%B7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="VS0CYuuxqYH1AjmSVIi39UiBz0ubcCCtUtHMiSsRQXA"/><meta name="msvalidate.01" content="3C21ED06CE83FA63D0A6E0ADE00F1DEE"/><link rel="stylesheet" href="/css/index.css?v=5.4.0-b2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-JRLJPHP21V"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-JRLJPHP21V')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-JRLJPHP21V', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '📖TypeScript 速通教程 @尚硅谷',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="/styles/minimal.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/butterfly_avatar_img.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 实用站点</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: linear-gradient(to top, #2980b9, #6dd5fa, #ffffff);;"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/images/butterfly_nav_logo.svg" alt="Logo"><span class="site-name">川一土的博客视界</span></a><a class="nav-page-title" href="/"><span class="site-name">📖TypeScript 速通教程 @尚硅谷</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 实用站点</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">📖TypeScript 速通教程 @尚硅谷</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-30T13:56:00.000Z" title="发表于 2024-11-30 21:56:00">2024-11-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-05T07:35:36.353Z" title="更新于 2025-06-05 15:35:36">2025-06-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/">前端知识</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/TypeScript/">TypeScript</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">8.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>36分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="TS-概述">TS - 概述</h2>
<ol>
<li>TypeScript 是 JavaScript 的<strong>超集</strong>。</li>
<li>它对 JS 进行了扩展，向 JS 中引入了<strong>类型</strong>的概念，并添加了许多新的特性。</li>
<li>TS 代码需要通过<strong>编译器</strong>编译为 JS，然后再交由 JS 解析器执行。</li>
<li>TS <strong>完全兼容</strong> JS，换言之，任何的 JS 代码都可以直接当成 TS 使用。</li>
</ol>
<h3 id="静态类型检查">静态类型检查</h3>
<ul>
<li><strong>静态类型检查</strong>，即<strong>在代码运行前进行检查</strong>，发现代码的错误或不合理之处，减少运行时异常的出现几率。</li>
<li>TypeScript 的<strong>核心</strong>就是静态类型检查，即将运行时的错误前置。</li>
</ul>
<h2 id="TS-编译">TS - 编译</h2>
<p>浏览器无法直接运行 .ts 文件，因此需要将 .ts 文件编译为 .js 文件。</p>
<h3 id="编译-命令行">编译 - 命令行</h3>
<p>Step1. <code>npm install -g typescript</code></p>
<p>Step2. <code>tsc &lt;.js 文件路径&gt;</code></p>
<blockquote>
<p><code>tsc</code> 是全局安装 typescript 后暴露的命令，是 typescript compiler 的简写，用于将 .ts 文件编译为 .js 文件</p>
</blockquote>
<h3 id="编译-自动化">编译 - 自动化</h3>
<p>Step1. <code>npm install -g typescript</code></p>
<p>Step2. <code>tsc --init</code></p>
<blockquote>
<p>创建了 <code>tsconfig.json</code> 配置文件，规定了将 .ts 文件编译为 .js 文件的方式。可以在配置文件中设置 <code>&quot;noEmitOnError&quot;: true</code>，使得编译出错时不生成 .js 文件。</p>
</blockquote>
<p>Step3. <code>tsc --watch </code></p>
<blockquote>
<p>监视当前目录下的所有 .ts 文件的变化，并根据 <code>tsconfig.json</code> 将其自动编译为 .js 文件。<code>--watch</code> 后也可以加具体的文件路径，表示只监视特定的文件。</p>
</blockquote>
<h2 id="TS-类型声明">TS - 类型声明</h2>
<ol>
<li>
<p>解释：类型声明给变量设置了类型，使得变量只能存储某种类型的值。</p>
</li>
<li>
<p>语法</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> 变量: 类型;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> 变量: 类型 = 值;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">参数: 类型, 参数: 类型</span>): 类型&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="TS-类型推断">TS - 类型推断</h2>
<p>解释：当对变量的声明和赋值是<strong>同时</strong>进行的，TS 编译器会自动判断变量的类型</p>
<h2 id="JS-TS-类型总览">JS|TS - 类型总览</h2>
<ol>
<li>JavaScript 中的数据类型：①string ②number ③boolean ④null ⑤undefined ⑥bigint ⑦symbol ⑧object</li>
<li>TypeScript 中的数据类型
<ol>
<li>JS 所有类型</li>
<li>TS 新增类型：①any ②unknown ③never ④void ⑤tuple ⑥enum ⑦字面量</li>
<li>TS 用于自定义类型的关键字：①type ②interface</li>
</ol>
</li>
<li>注意事项：String 和 string 都是 TypeScript 中所接受的类型，不过前者是<strong>包装对象类型，一般不建议使用</strong>；后者是<strong>原始类型，推荐使用</strong>。
<ol>
<li>原始类型：内存占用空间小，处理速度快。</li>
<li>包装对象：内存占用空间多，但可以调用方法或访问属性。</li>
</ol>
</li>
</ol>
<h2 id="TS-常用类型">TS - 常用类型</h2>
<h3 id="any">any</h3>
<ol>
<li>解释：<strong>任意类型</strong>，即一旦将变量类型限制为 <code>any</code>，那么就意味着放弃对该变量的类型检查。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示 any</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">any</span></span><br><span class="line"><span class="comment">// 隐式 any</span></span><br><span class="line"><span class="keyword">let</span> b</span><br><span class="line"><span class="comment">// 可以给 any 类型的变量赋任何值，不会警告</span></span><br><span class="line">b = <span class="number">100</span></span><br><span class="line">b = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">b = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li>注意：<code>any</code> 类型的变量，<strong>可以赋值给任意类型的变量</strong>，从而造成<strong>污染</strong>。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">any</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="built_in">string</span></span><br><span class="line">b = a <span class="comment">// 无警告</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="unknown">unknown</h3>
<ol>
<li>解释：<strong>未知类型</strong>，可以理解为<strong>类型安全</strong>的 <code>any</code>。该类型会强制开发者在使用之前对变量进行类型检查（<strong>if 判断</strong>或<strong>类型断言</strong>），否则会进行警告。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = a <span class="comment">// 警告：不能将类型 unknown 分配给类型 string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式一：if 判断，让 ts 知道 unknown 变量的具体类型</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">	x = a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：类型断言，用于指定 unknown 变量的具体类型</span></span><br><span class="line">x = a <span class="keyword">as</span> <span class="built_in">string</span> <span class="comment">// 类型断言写法 1</span></span><br><span class="line">x = &lt;<span class="built_in">string</span>&gt;a <span class="comment">// 类型断言写法 2</span></span><br></pre></td></tr></table></figure>
</li>
<li>注意：读取 <code>any</code> 类型变量的任何属性都不会报错，而 <code>unknown</code> 正相反。</li>
</ol>
<h3 id="never">never</h3>
<p>解释：<strong>不是任何类型</strong>，即 <code>never</code> 类型的变量不能有值。</p>
<ul>
<li>不用 <code>never</code> 去限制变量，无意义。</li>
<li>TypeScript 会根据代码执行情况，推断出某些永远无法执行的变量类型为 <code>never</code>。<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">toUpperCase</span>())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 这里的 a 会被推断为 never 类型，因为没有值符合这里的逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><code>never</code> 也可以用于限制函数的返回值类型，当 ①<strong>程序无法正常执行</strong>（报错）②程序永远无法停止（死循环）时，其返回值类型就可以是 <code>never</code>。  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throwError</span>(<span class="params"><span class="attr">message</span>: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="void">void</h3>
<ol>
<li>解释：<strong>空类型</strong>，常用于函数返回值的类型声明，表示 ①<strong>函数不返回任何值</strong>，②<strong>调用者也不应该依赖其返回值进行任何操作</strong>。其中，<code>undefined</code> 是 <code>void</code> 唯一接受的一种返回值。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 隐式返回 undefined - 1（无警告）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式返回 undefined - 2（无警告）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示返回 undefined - 3（无警告）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = <span class="title function_">print</span>(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line"><span class="keyword">if</span>(res) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可以获取函数的 void 返回值吗？&quot;</span>) <span class="comment">// 警告</span></span><br></pre></td></tr></table></figure>
</li>
<li>注意：如果函数的返回值被声明为 <code>void</code>，那么
<ul>
<li>语法上，函数可以返回 <code>undefined</code>，显式还是隐式返回无所谓。</li>
<li>语义上，函数调用者不应该关心函数返回的值，也不应依赖返回值进行任何操作。</li>
</ul>
</li>
</ol>
<h3 id="object">object</h3>
<ol>
<li><code>object</code>：所有<strong>非原始类型</strong>，包括对象、函数、数组等。</li>
<li><code>Object</code>：所有<strong>可以调用 Object 方法的类型</strong>（<strong>除了 undefined 和 null 的任何值</strong>）。</li>
<li>注意：object 和 Object 在实际开发中使用频率极低。</li>
</ol>
<h3 id="声明对象类型">声明对象类型</h3>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明（一般）对象类型的必选属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;<span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>&#125; <span class="comment">// 属性以 , 分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;<span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">age</span>: <span class="built_in">number</span>&#125; <span class="comment">// 属性以 ; 分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123; <span class="comment">// 属性以换行分隔</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明（一般）对象类型的可选属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, gender?: <span class="built_in">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明（一般）对象类型的任意数量的类型不定的属性（动态属性）</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="声明函数类型">声明函数类型</h3>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明函数类型，包括参数及返回值</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">sum</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br></pre></td></tr></table></figure>
<h3 id="声明数组类型">声明数组类型</h3>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明数组类型 - 方式 1（类型[]）</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="built_in">string</span>[]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明数组类型 - 方式 2（Array&lt;类型&gt;）</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="tuple">tuple</h3>
<p>解释：<strong>特殊的数组类型</strong>，可以存储<strong>固定数量</strong>的元素，并且每个元素的<strong>类型是已知</strong>的，且<strong>可以不同</strong>。元组用于精确描述一组值的类型，<code>?</code> 表示可选元素。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两个元素，第一个必须是 string 类型，第二个必须是 number 类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span><br><span class="line"><span class="comment">// 第一个元素必须是 number 类型，第二个元素是可选的，如果存在，必须是 boolean 类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: [<span class="built_in">number</span>, <span class="built_in">boolean</span>?]</span><br><span class="line"><span class="comment">// 第一个元素必须是 number 类型，后边可以是任意数量的 string 类型的元素</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>: [<span class="built_in">number</span>, ...<span class="built_in">string</span>[]]</span><br></pre></td></tr></table></figure>
<h3 id="enum">enum</h3>
<ol>
<li>
<p>解释：<code>enum</code> 可以定义<strong>一组命名常量</strong>，用于增强代码的<strong>可读性和可维护性</strong>。枚举分为<strong>数字枚举、字符串枚举、常量枚举</strong>。</p>
</li>
<li>
<p><strong>数字枚举</strong>：最常见的枚举类型。数字枚举的成员的值是<strong>数字</strong>，默认会<strong>自动递增</strong>；数字枚举存在<strong>反向映射</strong>。</p>
 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Sex</span> &#123;</span><br><span class="line">    <span class="title class_">Male</span>,</span><br><span class="line">    <span class="title class_">Female</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Sex 被编译为，</span></span><br><span class="line"><span class="comment">    var Sex;</span></span><br><span class="line"><span class="comment">    (function (Sex) &#123;</span></span><br><span class="line"><span class="comment">        Sex[Sex[&quot;Male&quot;] = 0] = &quot;Male&quot;;</span></span><br><span class="line"><span class="comment">        Sex[Sex[&quot;Female&quot;] = 1] = &quot;Female&quot;;</span></span><br><span class="line"><span class="comment">    &#125;)(Sex || (Sex = &#123;&#125;));</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">recruitPolicy</span>(<span class="params"><span class="attr">sex</span>: <span class="title class_">Sex</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (sex === <span class="title class_">Sex</span>.<span class="property">Male</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;height &gt;= 185cm and weight &lt;= 80kg&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sex === <span class="title class_">Sex</span>.<span class="property">Female</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;height &gt;= 165cm and weight &lt;= 70kg&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;invalid params&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;eyesight &gt;= 3.8&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;salary = 3000&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">recruitPolicy</span>(<span class="title class_">Sex</span>.<span class="property">Female</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>字符串枚举</strong>：枚举成员的值是<strong>字符串</strong>，不存在反向映射。</p>
 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Sex</span> &#123;</span><br><span class="line">    <span class="title class_">Male</span> = <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    <span class="title class_">Female</span> = <span class="string">&#x27;female&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Sex 被编译为，</span></span><br><span class="line"><span class="comment">    var Sex;</span></span><br><span class="line"><span class="comment">    (function (Sex) &#123;</span></span><br><span class="line"><span class="comment">        Sex[&quot;Male&quot;] = &quot;male&quot;;</span></span><br><span class="line"><span class="comment">        Sex[&quot;Female&quot;] = &quot;female&quot;;</span></span><br><span class="line"><span class="comment">    &#125;)(Sex || (Sex = &#123;&#125;));</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>常量枚举</strong>：特殊的枚举类型，使用 <code>const enum</code> 关键字定义，在编译时会被<strong>内联</strong>，避免生成额外的代码。</p>
<blockquote>
<p>编译时内联：即 TypeScript 在编译时，会将<strong>枚举成员引用</strong>替换为它们的<strong>实际值</strong>，这样就不会生成额外的枚举对象，从而减少代码量，并提高运行时性能。</p>
</blockquote>
 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> <span class="title class_">Sex</span> &#123;</span><br><span class="line">    <span class="title class_">Male</span> = <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    <span class="title class_">Female</span> = <span class="string">&#x27;female&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Sex</span>.<span class="property">Male</span>)</span><br></pre></td></tr></table></figure>
<p>被编译为，</p>
 <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;male&quot;</span> <span class="comment">/* Sex.Male */</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="type">type</h3>
<ol>
<li>解释：<code>type</code> 关键字用于为任意类型<strong>创建别名</strong>。</li>
<li>基本使用：<code>type 别名 = 类型</code> <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// digit 类型是 number 类型的别名</span></span><br><span class="line"><span class="keyword">type</span> digit = <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">price</span>: digit</span><br><span class="line">price = <span class="number">100</span></span><br></pre></td></tr></table></figure>
</li>
<li>联合类型：<code>type 别名 = 类型1 | 类型2 | 类型3</code>，表示变量的值可以是<strong>若干类型之一</strong>。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Status</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">State</span> = <span class="string">&quot;Success&quot;</span> | <span class="string">&quot;Error&quot;</span> | <span class="string">&quot;Unkown&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printHttpStatus</span>(<span class="params"><span class="attr">status</span>: <span class="title class_">Status</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">state</span>: <span class="title class_">State</span>;</span><br><span class="line">    <span class="keyword">if</span> (status.<span class="title function_">toString</span>().<span class="title function_">startsWith</span>(<span class="string">&#x27;2&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(status);</span><br><span class="line">        state = <span class="string">&#x27;Success&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (status.<span class="title function_">toString</span>().<span class="title function_">startsWith</span>(<span class="string">&#x27;4&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(status);</span><br><span class="line">        state = <span class="string">&quot;Error&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;unknown status&quot;</span>);</span><br><span class="line">        state = <span class="string">&quot;Unkown&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state404 = <span class="title function_">printHttpStatus</span>(<span class="string">&quot;404&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> state200 = <span class="title function_">printHttpStatus</span>(<span class="string">&quot;200&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`404 is <span class="subst">$&#123;state404&#125;</span>, 200 is <span class="subst">$&#123;state200&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>交叉类型：<code>type 别名 = 类型1 ＆ 类型2 ＆ 类型3</code>，表示变量的值必须<strong>同时满足若干类型</strong>。交叉类型常用于对象类型，用于合并所有对象类型的成员。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Address</span> = &#123;</span><br><span class="line">    <span class="attr">country</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">province</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">city</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">district</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">code</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">BasicInfo</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">school</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = <span class="title class_">Address</span> &amp; <span class="title class_">BasicInfo</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">lee</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;lee&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&quot;NU&quot;</span>,</span><br><span class="line">    <span class="attr">country</span>: <span class="string">&quot;CN&quot;</span>,</span><br><span class="line">    <span class="attr">province</span>: <span class="string">&quot;SX&quot;</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&quot;XX&quot;</span>,</span><br><span class="line">    <span class="attr">district</span>: <span class="string">&quot;JJ&quot;</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">&quot;000000&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="type-void-存在的问题">type + void 存在的问题</h3>
<ol>
<li>问题描述：当使用类型声明限制函数返回值为 void 时，TypeScript 不会严格要求函数返回空（即允许函数返回 undefined 之外的值）。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">NoReturnFunc</span> = <span class="function">(<span class="params">...<span class="attr">args</span>: <span class="title class_">String</span>[]</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">printf</span>: <span class="title class_">NoReturnFunc</span> = <span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> funcCode = <span class="title function_">printf</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(funcCode); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (funcCode == <span class="number">0</span>) <span class="comment">// 警告：This comparison appears to be unintentional because the types &#x27;void&#x27; and &#x27;number&#x27; have no overlap.</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;success!&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>原因解释：TS 这样设计是为了确保像如下的代码成立，避免类型限制影响箭头函数的简写语法。 <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> src = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> dst = [<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">src.<span class="title function_">forEach</span>(<span class="function"><span class="params">el</span> =&gt;</span> dst.<span class="title function_">push</span>(el)); </span><br><span class="line"><span class="comment">// forEach 的回调函数返回值类型是 void，表示不关心返回值。</span></span><br><span class="line"><span class="comment">// 这里使用的箭头函数虽然返回了 dst.push(el) 的结果（即 dst 的最新长度），但 TypeScript 将其处理为 void 类型。</span></span><br><span class="line"><span class="comment">// 这是为了避免因为不必要的返回值引发错误。</span></span><br><span class="line"><span class="comment">// 同时，void 类型的函数返回值不能被用于比较或赋值，否则会报错。</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="TS-类">TS - 类</h2>
<h3 id="定义-重写">定义 | 重写</h3>
<p>TS 中的类与 JS 相比，有以下注意事项，</p>
<ul>
<li>属性必须<strong>预先声明</strong></li>
<li>重写父类方法时<strong>推荐使用</strong> <strong><code>override</code></strong> <strong>关键字</strong>，可以增加语法提示，避免出错</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`I&#x27;m <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span> years old now`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">grade</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">grade</span> = grade;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`I&#x27;m <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span> years old now, and in Grade <span class="subst">$&#123;<span class="variable language_">this</span>.grade&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="属性修饰符">属性修饰符</h3>
<p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/image-20241202105548018.png" alt="image-20241202105548018"></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="attr">studentId</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="attr">identityId</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="attr">studentId</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="attr">identityId</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    </span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">studentId</span> = studentId;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">identityId</span> = identityId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getStudentId</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">studentId</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getIdentityId</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">identityId</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">printInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`name=<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`age=<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`studentId=<span class="subst">$&#123;<span class="variable language_">this</span>.studentId&#125;</span>`</span>);</span><br><span class="line">        <span class="comment">// console.log(`identityId=$&#123;this.identityId&#125;`); // 警告</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`identityId=<span class="subst">$&#123;<span class="variable language_">this</span>.getIdentityId()&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">19</span>, <span class="string">&quot;132434&quot;</span>, <span class="string">&quot;24465767&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`name=<span class="subst">$&#123;stu.name&#125;</span>`</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`age=<span class="subst">$&#123;stu.age&#125;</span>`</span>);</span><br><span class="line"><span class="comment">// console.log(`studentId=$&#123;stu.studentId&#125;`);</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`studentId=<span class="subst">$&#123;stu.getStudentId()&#125;</span>`</span>);</span><br><span class="line"><span class="comment">// console.log(`studentId=$&#123;stu.identityId&#125;`);</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`studentId=<span class="subst">$&#123;stu.getIdentityId()&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>
<h3 id="属性的简写">属性的简写</h3>
<p>语法：<code>constructor(修饰符 属性名: 类型, 修饰符 属性名: 类型, ...)</code></p>
<blockquote>
<p><strong>属性简写必须包含修饰符</strong>，但是<strong>当属性是继承于父类/抽象类时，不能包含修饰符</strong>。</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person1</span> &#123;</span><br><span class="line">    <span class="comment">/* 完整写法 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person2</span> &#123;</span><br><span class="line">    <span class="comment">/* 简写形式（推荐！） */</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="TS-抽象类">TS - 抽象类</h2>
<ol>
<li>解释：抽象类是一种<strong>无法被实例化的类</strong>，专门用于定义类的<strong>结构和行为</strong>，类中可以写<strong>抽象方法</strong>，也可以写<strong>具体实现</strong>。</li>
<li>功能：抽象类主要用于为其派生类提供一个<strong>基础结构</strong>，要求其派生类<strong>必须实现其中的抽象方法</strong>。</li>
<li>语法：使用 <code>abstract</code> 关键字修饰类，则为<strong>抽象类</strong>；修饰方法，则为<strong>抽象方法</strong>。</li>
<li>适用场景：①定义通用接口 ②提供基础实现 ③确保关键实现 ④共享代码和逻辑</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 包裹 - 抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Package</span> &#123;</span><br><span class="line">    <span class="comment">// 构造方法 - weight: 包裹重量</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">weight</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// 抽象方法 - calculate: 计算包裹运费</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="title function_">calculate</span>(): <span class="built_in">number</span></span><br><span class="line">    <span class="comment">// 具体实现 - printPackage: 打印包裹重量和运费</span></span><br><span class="line">    <span class="title function_">printPackage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`package weight=<span class="subst">$&#123;<span class="variable language_">this</span>.weight&#125;</span>, package express fee=<span class="subst">$&#123;<span class="variable language_">this</span>.calculate()&#125;</span>￥`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标准包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StandardPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">weight</span>: <span class="built_in">number</span>, <span class="keyword">public</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(weight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 特快包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExpressPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="attr">weight</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">additional</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(weight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weight</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">10</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span> + (<span class="variable language_">this</span>.<span class="property">weight</span> - <span class="number">10</span>) * <span class="variable language_">this</span>.<span class="property">additional</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">StandardPackage</span>(<span class="number">100</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">const</span> e = <span class="keyword">new</span> <span class="title class_">ExpressPackage</span>(<span class="number">100</span>, <span class="number">12</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">s.<span class="title function_">printPackage</span>();</span><br><span class="line">e.<span class="title function_">printPackage</span>();</span><br></pre></td></tr></table></figure>
<h2 id="TS-接口">TS -  接口</h2>
<ol>
<li>解释：接口（interface）是一种<strong>定义结构</strong>的方式，用于为<strong>类、对象、函数</strong>等规定一种<strong>契约</strong>，从而确保代码的一致性和类型安全。但是注意：interface <strong>只能定义结构，不能包含任何实现</strong>。</li>
<li>命名规范：如 <code>IPerson</code> 或 <code>PersonInterface</code>。</li>
<li>适用场景：①定义对象的格式 ②类的契约 ③自动合并</li>
</ol>
<h3 id="定义-使用">定义 | 使用</h3>
<h4 id="类结构">类结构</h4>
<p>类使用 <code>implements</code> 关键字实现已有的接口，规范类的实现。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="title function_">sayHello</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sayHello</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello World!&quot;</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">19</span>);</span><br><span class="line">p.<span class="title function_">sayHello</span>();</span><br></pre></td></tr></table></figure>
<h4 id="对象结构">对象结构</h4>
<p>接口可以看作一个类型，可以使用 <code>:接口名</code> 的方式，限制对象的类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IUser</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    age?: <span class="built_in">number</span> <span class="comment">// 可选属性</span></span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">gender</span>: <span class="built_in">string</span> <span class="comment">// 只读属性</span></span><br><span class="line">    <span class="title function_">sayHello</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">IUser</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jack&quot;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&quot;Male&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">19</span>,</span><br><span class="line">    <span class="title function_">sayHello</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello World!&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数结构">函数结构</h4>
<p>接口可以看作一个类型，也可以使用 <code>:接口名</code> 的方式，限制函数的类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IAdd</span> &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">add</span>: <span class="title class_">IAdd</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<h3 id="继承">继承</h3>
<p>接口可以通过 <code>extends</code> 关键字实现继承。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IStudent</span> <span class="keyword">extends</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">IStudent</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jack&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">19</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&quot;M3&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自动合并">自动合并</h3>
<p>同名接口的重复定义并不会导致接口覆盖，而是<strong>自动合并</strong>。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">IPerson</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jack&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">19</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&quot;M3&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="与-type-和抽象类的区别">与 type 和抽象类的区别</h3>
<p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/image-20241202112854852.png" alt="image-20241202112854852"></p>
<h2 id="TS-泛型">TS - 泛型</h2>
<ol>
<li>
<p>解释：泛型允许在定义函数、类或接口时，<strong>使用类型参数来表示未指定的类型</strong>，这些参数在具体使用时才被指定为具体的类型。泛型可以让同一段代码适用于多种类型，同时仍保持类型的安全性。</p>
</li>
<li>
<p>使用</p>
<ul>
<li>
<p>泛型函数</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> log&lt;T&gt;(<span class="attr">msg</span>: T): T &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">    <span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log&lt;<span class="built_in">number</span>&gt;(<span class="number">100</span>);</span><br><span class="line">log&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;Hello World&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多个泛型</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> log&lt;T, U&gt;(<span class="attr">msg1</span>: T, <span class="attr">msg2</span>: U): T | U &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg1, msg2)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? msg1 : msg2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;(<span class="number">100</span>, <span class="string">&#x27;big number&#x27;</span>);</span><br><span class="line">log&lt;<span class="built_in">string</span>, <span class="built_in">boolean</span>&gt;(<span class="string">&#x27;happy now&#x27;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>泛型接口</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">extraInfo</span>: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p</span>: <span class="title class_">IPerson</span>&lt;<span class="built_in">string</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Jack&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">19</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: <span class="string">&quot;Male&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>泛型约束</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> logPerson&lt;T <span class="keyword">extends</span> <span class="title class_">IPerson</span>&gt;(<span class="attr">info</span>: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`name=<span class="subst">$&#123;info.name&#125;</span>, age=<span class="subst">$&#123;info.age&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">logPerson</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;Jack&quot;</span>, <span class="attr">age</span>: <span class="number">19</span> &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>泛型类</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">extraInfo</span>: T</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IJobInfo</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">company</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="title class_">IJobInfo</span>&gt;(<span class="string">&quot;Jack&quot;</span>, <span class="number">19</span>, &#123; <span class="attr">title</span>: <span class="string">&quot;web&quot;</span>, <span class="attr">company</span>: <span class="string">&quot;ccd&quot;</span> &#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="TS-类型声明文件">TS - 类型声明文件</h2>
<ol>
<li>
<p>解释：类型声明文件是 TypeScript 中的一种特殊文件，通常以 <code>.d.ts</code> 作为扩展名。其主要用于<strong>为现有的 JavaScript 代码提供类型信息</strong>，使得 TypeScript 能够在使用 JavaScript 库或模块时进行类型检查和提示。</p>
</li>
<li>
<p>语法：使用 <code>declare</code> 关键字，为现有代码提供类型信息。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo.d.ts，为现有的同名 .js 文件中的代码添加类型信息</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;add, mul&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; add, mul &#125; <span class="keyword">from</span> <span class="string">&quot;./demo.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> x = <span class="title function_">add</span>(<span class="number">2</span>, <span class="number">4</span>); <span class="comment">// 会有类型提示</span></span><br><span class="line"><span class="keyword">const</span> y = <span class="title function_">mul</span>(<span class="number">4</span>,<span class="number">5</span>); <span class="comment">// 会有类型提示</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="TS-装饰器">TS - 装饰器</h2>
<h3 id="概述">概述</h3>
<ul>
<li>
<p>装饰器本质是一种<strong>特殊的函数</strong>，它可以对<strong>类、属性、方法、参数</strong>进行<strong>扩展</strong>，同时能让代码更简洁。</p>
</li>
<li>
<p>装饰器自 2015 年在 ECMAScript-6 中被提出到现在，已将近 10 年。</p>
</li>
<li>
<p>截止目前，装饰器依然是<strong>实验性特性</strong>，需要开发者手动调整配置来开启装饰器支持。</p>
</li>
<li>
<p>装饰器有五种：<strong>类装饰器</strong>、<strong>属性装饰器</strong>、<strong>方法装饰器</strong>、<strong>访问器装饰器</strong>、<strong>参数装饰器</strong>。</p>
</li>
<li>
<p>虽然 TypeScript 5.0 中可以直接使用类装饰，但为了确保其他装饰器可用，现阶段使用时，仍建议使用<code>experimentalDecorators</code> 配置来<strong>开启装饰器支持</strong>。</p>
<img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/-17331299369591.png" alt="img" style="zoom:50%;" />
</li>
</ul>
<h3 id="类装饰器">类装饰器</h3>
<ol>
<li>
<p>解释：类装饰器是一个应用在<strong>类声明</strong>上的<strong>函数</strong>，可以为类添加<strong>额外的功能或逻辑</strong>。</p>
</li>
<li>
<p>语法：类装饰器的<strong>定义</strong>及<strong>使用</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 类装饰器 - 定义 ：一个可接受目标类为参数的函数 */</span></span><br><span class="line"><span class="comment">/* 注意-1：target 参数就是要被装饰的类 */</span></span><br><span class="line"><span class="comment">/* 注意-2：类装饰器可以返回一个新的类，替换掉被装饰的类；否则，被装饰的类不会被替换 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ClassDecoratorDemo</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类装饰器被调用，收到的参数为 <span class="subst">$&#123;target&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 类装饰器 - 使用：通过 @装饰器名 的方式将类装饰器应用于类 */</span></span><br><span class="line"><span class="comment">/* 注意：类装饰器的调用时机为类定义阶段，类实例化之前 */</span></span><br><span class="line"><span class="meta">@ClassDecoratorDemo</span> <span class="comment">// @ClassDecoratorDemo &lt;==&gt; ClassDecoratorDemo(Person)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`类构造函数被调用`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>构造类型声明：在 TypeScript 中，<code>Function</code> 类型可以表示诸如普通函数、箭头函数、方法等等，但是 <code>Function</code> 类型的函数并非都可以使用 <code>new</code> 关键字实例化（如箭头函数），因此我们需要定义一个新的类型用于限制类装饰器中的 <code>target</code> 参数类型，该类型称之为<strong>构造类型</strong>，共有以下两种方式声明构造类型。</p>
<ul>
<li>
<p><strong>声明构造类型</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 仅声明构造类型 */</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  - new     表示 该类型可以使用 new 关键字进行实例化，即该类型是构造类型</span></span><br><span class="line"><span class="comment">  - ...args 表示 该类型可以接受任意数量的参数</span></span><br><span class="line"><span class="comment">  - any[]   表示 该类型可以接受任意类型的参数</span></span><br><span class="line"><span class="comment">  - &#123;&#125;      表示 该类型的返回类型是对象（非 null、非 undefined）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ClassDecoratorDemo</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ClassDecoratorDemo</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>声明构造类型 + 指定静态属性</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 声明构造类型 + 指定静态属性 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = &#123;</span><br><span class="line">  <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]): &#123;&#125;; <span class="comment">// 构造类型签名</span></span><br><span class="line">  <span class="attr">layer</span>: <span class="built_in">string</span>; <span class="comment">// 静态属性 layer（即指定的构造类型必须要有 layer 静态属性）</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ClassDecoratorDemo</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ClassDecoratorDemo</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> layer = <span class="string">&quot;elite&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>应用举例-1：定义一个装饰器，实现 <code>Person</code> 实例调用 <code>toString</code> 时返回 <code>JSON.stringify</code> 的执行结果。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自定义构造类型 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 自定义类装饰器，用于新增属性和方法 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ToStringDecorator</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;</span><br><span class="line">  <span class="comment">// 修改 Person 的 toString 方法</span></span><br><span class="line">  target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>); <span class="comment">// this 指向调用 toString 方法的 Person 实例</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// “密封” Person 的原型对象，此时 ①阻止添加新属性 ②阻止删除现有属性 ③保持现有属性的可配置性</span></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">seal</span>(target.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用类装饰器 */</span></span><br><span class="line"><span class="meta">@ToStringDecorator</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tom = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tom.<span class="title function_">toString</span>());</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>应用举例-2：设计一个 <code>LogTime</code> 装饰器，可以给实例添加一个属性，用于记录实例对象的创建时间，再添加一个方法，用于读取创建时间。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自定义构造类型 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* User 类型约束 */</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">createdAt</span>: <span class="title class_">Date</span>;</span><br><span class="line">  <span class="attr">getCreatedAt</span>: <span class="function">() =&gt;</span> <span class="built_in">string</span>; <span class="comment">// 等价于 getCreatedAt(): string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 自定义类装饰器，用于新增属性和方法 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title class_">LogTime</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Constructor</span>&gt;(<span class="attr">target</span>: T) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">createdAt</span>: <span class="title class_">Date</span>; <span class="comment">// 实例创建时间</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>(...args); <span class="comment">// 调用父类的构造函数</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">createdAt</span> = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getCreatedAt</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`该对象创建于 <span class="subst">$&#123;<span class="variable language_">this</span>.createdAt&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用类装饰器 */</span></span><br><span class="line"><span class="meta">@LogTime</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tom = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tom));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tom.<span class="title function_">getCreatedAt</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tom.<span class="property">createdAt</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="装饰器工厂">装饰器工厂</h4>
<ol>
<li>
<p>解释：装饰器工厂是一个<strong>返回装饰器的函数</strong>，可以为装饰器添加<strong>参数</strong>，从而更灵活地控制装饰器的行为。</p>
</li>
<li>
<p>应用举例：定义一个 <code>LogInfo</code> <strong>类装饰器工厂</strong>，实现 <code>Person</code> 实例可以调用 <code>introduce</code> 方法，且 <code>introduce</code> 调用内容输出的次数由 <code>LogInfo</code> 接收的参数决定。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 构造类型 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Person 类型约束 */</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">introduce</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>; <span class="comment">// 等价于 introduce(): void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 类装饰器工厂 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DecoratorFactory</span>(<span class="params"><span class="attr">repetition</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 向实例的原型上添加方法 introduce</span></span><br><span class="line">    target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; repetition; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and I&#x27;m <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span> years old.`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用类装饰器 */</span></span><br><span class="line"><span class="meta">@DecoratorFactory</span>(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tom = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tom&quot;</span>, <span class="number">20</span>);</span><br><span class="line">tom.<span class="title function_">introduce</span>();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="装饰器组合">装饰器组合</h4>
<p>解释：一个类可以组合使用多个<strong>装饰器</strong>或<strong>装饰器工厂</strong>，其执行顺序为 ① <strong>由上到下</strong>执行所有的<strong>装饰器工厂</strong>，依次获取到对应的装饰器 ② <strong>由下到上</strong>执行所有的<strong>装饰器</strong>。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自定义构造类型 */</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 装饰器 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 装饰器工厂 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test2工厂&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test2&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 装饰器工厂 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test3工厂&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test3&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 装饰器 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test4</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Constructor</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test4&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@test1</span></span><br><span class="line"><span class="meta">@test2</span>()</span><br><span class="line"><span class="meta">@test3</span>()</span><br><span class="line"><span class="meta">@test4</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码执行输出结果为</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">test2工厂</span><br><span class="line">test3工厂</span><br><span class="line">test4</span><br><span class="line">test3</span><br><span class="line">test2</span><br><span class="line">test1</span><br></pre></td></tr></table></figure>
<h3 id="属性装饰器">属性装饰器</h3>
<ol>
<li>
<p>语法</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 属性装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 对于静态属性，该参数为类；对于实例属性，该参数为类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 属性名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">FieldDecoratorDemo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target, propertyKey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="comment">/* 属性装饰器的使用 */</span></span><br><span class="line">  <span class="meta">@FieldDecoratorDemo</span> <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 等价于 FieldDecoratorDemo(prototype, name)</span></span><br><span class="line">  <span class="meta">@FieldDecoratorDemo</span> <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 等价于 FieldDecoratorDemo(prototype, age)</span></span><br><span class="line">  <span class="meta">@FieldDecoratorDemo</span> <span class="keyword">public</span> <span class="keyword">static</span> layer = <span class="string">&quot;elite&quot;</span>; <span class="comment">// 等价于 FieldDecoratorDemo(Person, layer)</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>属性遮蔽：以下代码，如果片段 <code>(2)</code> 在片段 <code>(3)</code> 上边，那么实例化 <code>Person</code> 时，<code>this.name = name</code> 创建实例属性 <code>name</code>，而 <code>this.age = age</code> 则是调用原型对象上的 <code>setter</code>，用于修改全局变量 <code>__age</code>，即属性遮蔽。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (1)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2)</span></span><br><span class="line"><span class="keyword">let</span> __age = <span class="number">130</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&quot;age&quot;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> __age;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">newAge</span>) &#123;</span><br><span class="line">    __age = newAge;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// (3)</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">19</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">age</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>应用举例：定义一个 <code>State</code> 属性装饰器，用于监视属性的修改。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于监听实例属性修改的属性装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 原型对象（类的 prototype）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 被装饰的属性名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">State</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="comment">// 定义一个私有属性名，用于存储实际的值</span></span><br><span class="line">  <span class="keyword">const</span> key = <span class="string">`__<span class="subst">$&#123;propertyKey&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 在原型对象上定义属性的 getter 和 setter</span></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, propertyKey, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// getter 用于获取存储在实例上的私有属性值</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>[key]; <span class="comment">// `this` 指向实例对象</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">v</span>) &#123;</span><br><span class="line">      <span class="comment">// setter 用于监控属性值的修改并更新存储的值</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`实例属性 <span class="subst">$&#123;propertyKey&#125;</span> 被修改了: <span class="subst">$&#123;<span class="variable language_">this</span>[key]&#125;</span> --&gt; <span class="subst">$&#123;v&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>[key] = v; <span class="comment">// 更新存储的私有属性值</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="comment">// 属性可枚举</span></span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>, <span class="comment">// 属性描述符可配置</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 定义实例属性 name</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 为 age 属性添加装饰器，使其成为响应式属性</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name; <span class="comment">// 初始化实例属性 name</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age; <span class="comment">// 通过 setter 初始化 age 属性，本质上是设置私有属性 __age 的值</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例并验证功能</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>); <span class="comment">// 输出: 实例属性 age 被修改了: undefined --&gt; 10</span></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">19</span>); <span class="comment">// 输出: 实例属性 age 被修改了: undefined --&gt; 19</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1, p2); <span class="comment">// 输出: Person &#123; name: &#x27;Tom&#x27;, __age: 10 &#125; Person &#123; name: &#x27;Jack&#x27;, __age: 19 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ------------------------------------------------------------------------------- */</span></span><br><span class="line"><span class="comment">/* 上述代码可以完全等价为下述代码 */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 响应式实现-1，等同上述的属性装饰器 */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">__age</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">/* 响应式实现-2，监视 age 属性的修改，其中 age 属性存放在类的原型对象上，被代理的数据存储在实例对象上 */</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&quot;age&quot;</span>, &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">__age</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">v</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`实例属性 age 被修改了：<span class="subst">$&#123;<span class="variable language_">this</span>.__age&#125;</span> --&gt; <span class="subst">$&#123;v&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">__age</span> = v;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 = <span class="keyword">new</span> <span class="title class_">Animal</span>(<span class="string">&quot;Happy&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">const</span> a2 = <span class="keyword">new</span> <span class="title class_">Animal</span>(<span class="string">&quot;Lucky&quot;</span>, <span class="number">12</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1, a2);</span><br></pre></td></tr></table></figure>
 <details class="toggle" ><summary class="toggle-button" style="">补充 Object.defineProperty 的使用</summary><div class="toggle-content"><ol>
<li>
<p>功能：<code>Object.defineProperty()</code> 在给定的对象上<strong>定义</strong>一个新属性或<strong>修改</strong>一个现有属性，同时返回修改后的对象。</p>
</li>
<li>
<p>语法：<code>Object.defineProperty(obj, prop, descriptor)</code></p>
<ul>
<li><code>obj</code>：给定的对象</li>
<li><code>prop</code>：要定义或修改的属性名，可以是 string 或 <code>Symbol</code></li>
<li><code>descriptor</code>：<strong>属性描述符</strong>，用于控制要定义或修改的属性的行为</li>
</ul>
</li>
<li>
<p>返回值：定义或修改了指定属性后的给定对象。</p>
</li>
<li>
<p>使用说明</p>
<ul>
<li>属性描述符（property descriptor）可以分为<strong>数据描述符</strong>（data descriptor）和<strong>访问器描述符</strong>（accessor descriptor），对应的属性可以称之为<strong>数据属性</strong>和<strong>访问器属性</strong>。
<ul>
<li>属性描述符是一个<strong>对象</strong>，其中数据描述符所特有的配置项为 <code>value</code> 和 <code>writable</code>，访问器描述符所特有的配置项为 <code>get</code> 和 <code>set</code>，二者所共有的配置项为 <code>enumerable</code> 和 <code>configurable</code>。</li>
<li><strong>一个属性描述符只能是数据描述符或访问器描述符二者其一</strong>。</li>
<li>如果一个属性描述符不包含 <code>value</code>、<code>writable</code>、<code>get</code>、<code>set</code> 属性，则该属性描述符被看作数据描述符。</li>
<li>如果一个属性描述符同时包含 【<code>value</code> 或 <code>writable</code>】和【<code>get</code> 或 <code>set</code>】，则会报错。</li>
</ul>
</li>
<li>默认情况下，<code>Object.defineProperty()</code> 定义的属性是<strong>不可写</strong>（not writable）、<strong>不可枚举</strong>（not enumerable）、<strong>不可配置</strong>（not configurable）的。而通过 <code>object.propertyName=propertyValue</code> 这样的方式定义的属性是<strong>可写</strong>、<strong>可枚举</strong>、<strong>可配置</strong>的。</li>
<li><code>Object.defineProperty()</code> 本质上是通过 JavaScript 的内在方法（internal method）<code>[[DefineOwnProperty]]</code> 实现的，与另一个 JavaScript 的内在方法 <code>[[Set]]</code> 无关，因此，通过该方法修改一个现有属性不会导致该属性的 <code>setter</code> 被调用。</li>
</ul>
</li>
<li>
<p><code>descriptor</code> 配置（都是可选的！）</p>
<ul>
<li>
<p>共有的配置项（shared keys）</p>
<ul>
<li>
<p><code>configurable</code>：属性的类型是否可以切换（数据属性 ⇔ 访问器属性）；属性是否可以被删除；该属性的属性描述符的其他配置项是否可以被修改。默认值为 <code>false</code>。</p>
<blockquote>
<p>特殊情况：对于数据描述符而言，如果配置了 <code>writable: true</code>，那么无论如何，该属性的值都可以被修改，同时 <code>writable</code> 配置项可以被修改为 <code>false</code>。</p>
</blockquote>
</li>
<li>
<p><code>enumerable</code>：属性是否可枚举（如 <code>for...in</code>、<code>Object.keys</code>）。默认值为 <code>false</code>。</p>
</li>
</ul>
</li>
<li>
<p>数据描述符的配置项</p>
<ul>
<li><code>value</code>：属性对应的值，可以是任意合法的 JavaScript 值。默认值为 <code>undefined</code>。</li>
<li><code>writable</code>：属性是否可以通过赋值操作符（assignment operator）被修改。默认值为 <code>false</code>。</li>
</ul>
</li>
<li>
<p>访问器描述符的配置项</p>
<ul>
<li><code>get</code>：属性的 <code>getter</code>，访问该属性时调用，不接受参数，同时将其返回值视作属性值。默认值为 <code>undefined</code>。</li>
<li><code>set</code>：属性的 <code>setter</code>，对该属性赋值时调用，接受一个参数（即赋的新值）。默认值为 <code>undefined</code>。</li>
</ul>
<blockquote>
<p>注意事项：<strong>在 <code>get</code> 或 <code>set</code> 方法被调用时，函数中的 <code>this</code> 指向的是访问或修改该属性的对象</strong>。需要注意的是，由于 JavaScript 的继承机制，<code>this</code> 指向的不一定是属性所定义的对象。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
</div></details>
</li>
</ol>
<h3 id="方法装饰器">方法装饰器</h3>
<ol>
<li>
<p>语法</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 方法装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 对于静态方法，该参数是类；对于实例方法，该参数是类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 方法名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> descriptor 方法的描述对象，其 value 属性是被装饰的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MethodDecoratorDemo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">target</span>: <span class="built_in">object</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target, propertyKey, descriptor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@MethodDecoratorDemo</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 等价于 MethodDecoratorDemo(prototype, speak, descriptor)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hi, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and my age is <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@MethodDecoratorDemo</span> <span class="keyword">static</span> <span class="title function_">isAdult</span>(<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 等价于 MethodDecoratorDemo(Person, isAdult, descriptor)</span></span><br><span class="line">    <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>应用举例：定义一个 <code>Logger</code> 方法装饰器，用于在方法执行前和执行后，追加一些额外的逻辑；一个 <code>Validate</code> 方法装饰器，用于验证数据。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于在实例方法执行前后追加一些额外逻辑的方法装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 方法名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> descriptor 方法描述对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Logger</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">target</span>: <span class="built_in">object</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">/* 1. 缓存原始方法 */</span></span><br><span class="line">  <span class="keyword">const</span> original = descriptor.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">/* 2. 替换原始方法 */</span></span><br><span class="line">  descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`正在准备执行<span class="subst">$&#123;propertyKey&#125;</span>方法······`</span>);</span><br><span class="line">    <span class="keyword">const</span> result = original.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...args);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>方法已执行完毕!`</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于验证静态方法参数合法性的方法装饰器工厂</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> maxValue 最大参数值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> 方法装饰器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Validate</span>(<span class="params"><span class="attr">maxValue</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">target</span>: <span class="built_in">object</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span></span><br><span class="line"><span class="params">  </span>) &#123;</span><br><span class="line">    <span class="comment">/* 1. 缓存原始方法 */</span></span><br><span class="line">    <span class="keyword">const</span> original = descriptor.<span class="property">value</span>;</span><br><span class="line">    <span class="comment">/* 2. 替换原始方法 */</span></span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (args[<span class="number">0</span>] &gt; maxValue)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">          <span class="string">`非法的参数，所传入参数值 <span class="subst">$&#123;args[<span class="number">0</span>]&#125;</span> 大于最大允许传入值为 <span class="subst">$&#123;maxValue&#125;</span>`</span></span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">return</span> original.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...args);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Logger</span></span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"><span class="attr">repetition</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; repetition; i++) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, and my age is <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Validate</span>(<span class="number">150</span>)</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isAdult</span>(<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">23</span>);</span><br><span class="line">p.<span class="title function_">speak</span>(<span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="title function_">isAdult</span>(<span class="number">149</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="title function_">isAdult</span>(<span class="number">200</span>));</span><br></pre></td></tr></table></figure>
<details class="toggle" ><summary class="toggle-button" style="">补充 Function.prototype.apply/call/bind 的使用</summary><div class="toggle-content"><ol>
<li><code>Function.prototype.call()</code>：以给定的 <code>this</code> 值和逐个提供的参数调用该函数。
<ul>
<li>语法：<code>call(thisArg[, arg1, arg2, /* …, */ argN])</code></li>
<li>参数
<ul>
<li><code>thisArg</code>：调用 <code>func</code> 时要使用的 <code>this</code> 值。非严格模式下，<code>null</code> 和 <code>undefined</code> 被替换为全局对象，原始值被转换为对象。</li>
<li><code>arg1, arg2, /* …, */ argN</code>：可选的若干函数参数。</li>
</ul>
</li>
<li>返回值：使用指定的 <code>this</code> 值和若干可选参数调用函数后的结果。</li>
</ul>
</li>
<li><code>Function.prototype.apply()</code>：以给定的 <code>this</code> 值和以数组（或类数组对象）提供的参数调用该函数。
<ul>
<li>语法：<code>apply(thisArg, argsArray)</code></li>
<li>参数
<ul>
<li><code>thisArg</code>：调用 <code>func</code> 时要使用的 <code>this</code> 值。非严格模式下，<code>null</code> 和 <code>undefined</code> 被替换为全局对象，原始值被转换为对象。</li>
<li><code>argsArray</code>：可选的类数组对象，用于指定调用 <code>func</code> 时的参数。</li>
</ul>
</li>
<li>返回值：使用指定的 <code>this</code> 值和可选的类数组对象提供的参数调用函数后的结果。</li>
</ul>
</li>
<li><code>Function.prototype.bind()</code>：根据原始函数创建一个新函数，同时指定该新函数的 <code>this</code> 值和初始参数。
<ul>
<li>语法：<code>bind(thisArg, arg1, arg2, /* …, */ argN)</code></li>
<li>参数
<ul>
<li><code>thisArg</code>：调用新函数时要使用的 <code>this</code> 值。非严格模式下，<code>null</code> 和 <code>undefined</code> 被替换为全局对象，原始值被转换为对象。如果新函数被当作构造函数使用，则该参数会被忽略。</li>
<li><code>arg1, arg2, /* …, */ argN</code>：调用新函数时，插入到传入新函数中的参数前的可选的初始参数。</li>
</ul>
</li>
<li>返回值：使用指定的 <code>this</code> 值和可选的初始参数创建的新函数。</li>
</ul>
</li>
</ol>
</div></details>
</li>
</ol>
<h3 id="访问器装饰器">访问器装饰器</h3>
<ol>
<li>
<p>语法</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 访问器装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 对于静态访问器，该参数是类；对于实例访问器，该参数是类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 访问器名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> descriptor 访问器的描述对象，对应 get 和 set 属性是被装饰的访问器方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AccessorDecoratorDemo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">target</span>: <span class="built_in">object</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target, propertyKey, descriptor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@AccessorDecoratorDemo</span> <span class="keyword">get</span> <span class="title function_">school</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;XDU&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@AccessorDecoratorDemo</span> <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">address</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Xi&#x27;an&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>应用举例：对 <code>Weather</code> 类的 <code>temp</code> 属性的 <code>set</code> 访问器进行限制，允许设置的取值范围为 <code>[-50, 50]</code>。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成限制数值范围的访问器装饰器工厂</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> min 最低取值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> max 最高取值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> 限制数值范围的访问器装饰器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">RangeValidate</span>(<span class="params"><span class="attr">min</span>: <span class="built_in">number</span>, <span class="attr">max</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">target</span>: <span class="built_in">object</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span></span><br><span class="line"><span class="params">  </span>) &#123;</span><br><span class="line">    <span class="comment">/* 1. 缓存原始的 setter */</span></span><br><span class="line">    <span class="keyword">const</span> original = descriptor.<span class="property">set</span>;</span><br><span class="line">    <span class="comment">/* 2. 替换 setter，加入范围验证逻辑 */</span></span><br><span class="line">    descriptor.<span class="property">set</span> = <span class="keyword">function</span> (<span class="params"><span class="attr">value</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &lt; min || value &gt; max)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">          <span class="string">`<span class="subst">$&#123;propertyKey&#125;</span> 的取值范围应该在 <span class="subst">$&#123;min&#125;</span> 和 <span class="subst">$&#123;max&#125;</span> 之间`</span></span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">if</span> (original) original.<span class="title function_">call</span>(<span class="variable language_">this</span>, value);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">_temp</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">temp</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_temp</span> = temp;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@RangeValidate</span>(-<span class="number">50</span>, <span class="number">50</span>) <span class="keyword">set</span> <span class="title function_">temp</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_temp</span> = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">temp</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_temp</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> w = <span class="keyword">new</span> <span class="title class_">Weather</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="参数装饰器">参数装饰器</h3>
<ol>
<li>
<p>语法</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参数装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 修饰静态方法的参数时，该参数是类；修饰实例方法的参数时，该参数是类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 参数所在方法的名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parameterIndex 参所在方法的参数列表中的索引（0-based）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ArgumentDecoratorDemo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">target</span>: <span class="built_in">object</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">parameterIndex</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target, propertyKey, parameterIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"><span class="meta">@ArgumentDecoratorDemo</span> <span class="attr">message</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> say: <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>应用举例：定义方法装饰器 <code>Validate</code>，同时搭配参数装饰器 <code>NotNumber</code>，来对指定方法的参数类型进行限制。<code>NotNumber</code> 限制指定参数不能是数值类型，Validate 来验证使用 <code>NotNumber</code> 装饰器的参数是否满足条件。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 记录类型不为 number 的参数的参数装饰器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 参数所在的方法名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parameterIndex 参数在方法参数列表中的索引</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NotNumber</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">any</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">parameterIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="comment">/* 存储方法 propertyKey 中所有限制类型不为数字的参数索引 */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">notNumberArr</span>: <span class="built_in">number</span>[] = target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] || [];</span><br><span class="line">  notNumberArr.<span class="title function_">push</span>(parameterIndex);</span><br><span class="line">  target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] = notNumberArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 验证是否所有使用了 NotNumber 参数装饰器的参数都符合条件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 类的原型对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> propertyKey 方法名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> descriptor 方法的描述对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Validate</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">target</span>: <span class="built_in">any</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">propertyKey</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">/* 缓存原始方法 */</span></span><br><span class="line">  <span class="keyword">const</span> originalMethod = descriptor.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">/* 替换原始方法 */</span></span><br><span class="line">  descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">notNumberArr</span>: <span class="built_in">number</span>[] = target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] || [];</span><br><span class="line">    notNumberArr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> args[index] === <span class="string">&quot;number&quot;</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`第 <span class="subst">$&#123;index&#125;</span> 个参数不能为 number`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> originalMethod.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...args);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Validate</span></span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"><span class="meta">@NotNumber</span> <span class="attr">message</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> say: <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">p.<span class="title function_">speak</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">p.<span class="title function_">speak</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<details class="toggle" ><summary class="toggle-button" style="">本贴参考</summary><div class="toggle-content"><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1YS411w7Bf">禹神：三小时快速上手TypeScript，TS速通教程</a></p>
</div></details>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Nasir1423">yiTuChuan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zhengzehua.top/2024/11/30/TypeScript%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B@%E5%B0%9A%E7%A1%85%E8%B0%B7/">https://zhengzehua.top/2024/11/30/TypeScript%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B@%E5%B0%9A%E7%A1%85%E8%B0%B7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zhengzehua.top" target="_blank">川一土的博客视界</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/images/butterfly_avatar_img.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/05/TypeScript%E6%95%99%E7%A8%8B@%E9%98%AE%E4%B8%80%E5%B3%B0/" title="📖TypeScript 教程 @阮一峰"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">📖TypeScript 教程 @阮一峰</div></div><div class="info-2"><div class="info-item-1">全面介绍 TypeScript 的核心知识，涵盖类型系统、模块化、命名空间、装饰器、类型声明、配置文件等内容。文章通过大量代码示例和详细说明，帮助读者深入理解 TypeScript 的类型检查机制和高级特性，掌握 TypeScript 在实际开发中的应用。</div></div></div></a><a class="pagination-related" href="/2024/11/14/%E9%81%B5%E5%BE%AA%20PromiseA+%20%E8%A7%84%E8%8C%83%E7%9A%84%20Promise%20%E6%89%8B%E6%92%95/" title="📖遵循 Promise/A+ 规范的 Promise 手撕"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">📖遵循 Promise/A+ 规范的 Promise 手撕</div></div><div class="info-2"><div class="info-item-1">基于 Promise/A+ 规范从零实现一个完整的 Promise，包含详细的代码实现、注释说明和规范解读。通过类型定义、构造函数、实例方法(then/catch/finally)、静态方法(resolve/reject/all/race)等模块的实现，深入理解 Promise 的运行机制和设计思想。</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E6%A6%82%E8%BF%B0"><span class="toc-text">TS - 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5"><span class="toc-text">静态类型检查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E7%BC%96%E8%AF%91"><span class="toc-text">TS - 编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91-%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-text">编译 - 命令行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91-%E8%87%AA%E5%8A%A8%E5%8C%96"><span class="toc-text">编译 - 自动化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E"><span class="toc-text">TS - 类型声明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD"><span class="toc-text">TS - 类型推断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS-TS-%E7%B1%BB%E5%9E%8B%E6%80%BB%E8%A7%88"><span class="toc-text">JS|TS - 类型总览</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">TS - 常用类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#any"><span class="toc-text">any</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unknown"><span class="toc-text">unknown</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#never"><span class="toc-text">never</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#void"><span class="toc-text">void</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#object"><span class="toc-text">object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B"><span class="toc-text">声明对象类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">声明函数类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">声明数组类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tuple"><span class="toc-text">tuple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#enum"><span class="toc-text">enum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type"><span class="toc-text">type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type-void-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">type + void 存在的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E7%B1%BB"><span class="toc-text">TS - 类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-%E9%87%8D%E5%86%99"><span class="toc-text">定义 | 重写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">属性修饰符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%9A%84%E7%AE%80%E5%86%99"><span class="toc-text">属性的简写</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-text">TS - 抽象类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E6%8E%A5%E5%8F%A3"><span class="toc-text">TS -  接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-%E4%BD%BF%E7%94%A8"><span class="toc-text">定义 | 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E7%BB%93%E6%9E%84"><span class="toc-text">类结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%BB%93%E6%9E%84"><span class="toc-text">对象结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%BB%93%E6%9E%84"><span class="toc-text">函数结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%90%88%E5%B9%B6"><span class="toc-text">自动合并</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-type-%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">与 type 和抽象类的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E6%B3%9B%E5%9E%8B"><span class="toc-text">TS - 泛型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6"><span class="toc-text">TS - 类型声明文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS-%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">TS - 装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">类装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E5%B7%A5%E5%8E%82"><span class="toc-text">装饰器工厂</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E7%BB%84%E5%90%88"><span class="toc-text">装饰器组合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">属性装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">方法装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%99%A8%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">访问器装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">参数装饰器</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2024 - 2025 By yiTuChuan</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.4.0-b2"></script><script src="/js/main.js?v=5.4.0-b2"></script><div class="js-pjax"><script>(() = {
  const abcjsInit = () => {
    const abcjsFn = () => {
      setTimeout(() => {
        const sheets = document.querySelectorAll(".abc-music-sheet")
        for (let i = 0; i < sheets.length; i++) {
          const ele = sheets[i]
          if (ele.children.length > 0) continue

          // Parse parameters from data-params attribute
          let params = {}
          const dp = ele.getAttribute("data-params")
          if (dp) {
            try {
              params = JSON.parse(dp)
            } catch (e) {
              console.error("Failed to parse data-params:", e)
            }
          }

          // Merge parsed parameters with the responsive option
          // Ensures params content appears before responsive
          const options = { ...params, responsive: "resize" }

          // Render the music score using ABCJS.renderAbc
          ABCJS.renderAbc(ele, ele.innerHTML, options)
        }
      }, 100)
    }

    if (typeof ABCJS === "object") {
      abcjsFn()
    } else {
      btf.getScript("https://cdn.jsdelivr.net/npm/abcjs@6.4.4/dist/abcjs-basic-min.min.js").then(abcjsFn)
    }
  }

  if (window.pjax) {
    abcjsInit()
  } else {
    window.addEventListener("load", abcjsInit)
  }

  btf.addGlobalFn("encrypt", abcjsInit, "abcjs")
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'Nasir1423/blog-comment',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.4/dist/click-show-text.min.js" data-mobile="false" data-text="Prosperity,Democracy,Civility,Harmony,Freedom,Equality,Justice,Rule of Law,Patriotism,Dedication,Integrity,Friendliness" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>